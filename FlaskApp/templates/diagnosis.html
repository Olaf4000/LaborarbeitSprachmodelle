{% extends 'base.html' %}

{% block head %}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEJ1QJQ57lXrDvhWPII75P4rwAdC14aG0s0+qKqsTp3wR6zrlDnoWQAlFpm9Z" crossorigin="anonymous">
{% endblock %}

{% block body %}

<div class="container mt-5">
    <h2 class="mb-4">Um eine Diagnose zu erstellen, bitte das Formular ausfüllen.</h2>
    <form action="{{ url_for('diagnosis.submit_diagnosis') }}" method="POST">
        <!-- Name und Alter in einer Zeile -->
        <div class="mb-3 row">
        <!-- Name -->
            <div class="col-md-6">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Name eingeben" required>
            </div>

            <!-- Alter -->
            <div class="col-md-6">
                <label for="age" class="form-label">Alter</label>
                <input type="number" id="age" name="age" class="form-control" placeholder="Alter eingeben" required>
            </div>
        </div>

        <!-- Geschlecht -->
        <div class="mb-3">
            <label for="gender" class="form-label">Geschlecht</label>
            <select id="gender" name="gender" class="form-select" required>
                <option value="" disabled selected>Geschlecht auswählen</option>
                <option value="male">männlich</option>
                <option value="female">weiblich</option>
                <option value="other">anderes</option>
            </select>
        </div>

        <!-- Arzt Auswahl -->
        <div class="mb-3">
            <label for="doctors" class="form-label">Von welchem GPT-Arzt möchten Sie eine Diagnose?</label>
            <select id="doctors" name="doctors" class="form-select" required>
                {% for doctor in doctors %}
                    <option value={{ doctor.id }} {% if doctor.id == default_doctor_id %}selected{% endif %}>
                        {{ doctor.name }} - {{ doctor.medical_specialty }}
                    </option>
                {% endfor %}
            </select>
        </div>

        <!-- Symptome und Familiäre Krankheiten in einer Zeile -->
        <div class="mb-3 row">
            <!-- Symptome -->
            <div class="col-md-6">
                <label for="symptoms" class="form-label">Symptome</label>
                <textarea id="symptoms" name="symptoms" class="form-control" rows="4" placeholder="Beschreibe deine Symptome ausführlich und detailliert" required></textarea>
            </div>

            <!-- Familiäre Krankheiten -->
            <div class="col-md-6">
                <label for="family_diseases" class="form-label">Familiäre Krankheiten</label>
                <textarea id="family_diseases" name="family_diseases" class="form-control" rows="4" placeholder="Liste bekannte familiäre Krankheiten auf (falls zutreffend)"></textarea>
            </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">Diagnose erstellen</button>
    </form>

    <!-- Button zur Weiterleitung auf die Ergebnisse-Seite -->
    <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('diagnosis.results') }}'">!!!Debug!!! Ergebnisse der Diagnose</button>
</div>

{% endblock %}